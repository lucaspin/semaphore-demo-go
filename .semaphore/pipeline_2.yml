version: v1.0
name: 'Production Deployment - ${{parameters.VERSION}}'
agent:
  machine:
    type: f1-standard-2
    os_image: ubuntu2204
blocks:
  - name: Deploy
    task:
      jobs:
        - name: Deploy
          commands:
            - echo "Deploying $VERSION..."
            - |
              curl -X POST \
                -H "Content-Type: application/json" \
                -H "Authorization: Bearer $SEMAPHORE_STAGE_EXECUTION_TOKEN" \
                --data "{\"version\":\"$VERSION\"}" \
                https://lucaspin.sxmoon.com/api/v1/delivery/executions/$SEMAPHORE_STAGE_EXECUTION_ID/outputs
