version: v1.0
name: Semaphore Go CI example
agent:
  machine:
    type: e1-standard-2
    os_image: ubuntu1804
blocks:
  - name: Build project
    run:
      when: change_in('/public/')
    task:
      jobs:
        - name: go get & build
          commands:
            - 'echo "hello, darkness, my old friend"'
            - 'for ((i=1; i<=100; i++)); { echo $i; sleep 0.2; }'
  - name: Other
    task:
      jobs:
        - name: other
          commands:
            - echo hello
