version: v1.0
name: Semaphore Go CI example
agent:
  machine:
    type: f1-standard-2
    os_image: ubuntu2204
blocks:
  - name: Build project
    task:
      jobs:
        - name: Test
          commands:
            - mkdir .workflow-editor/.semaphore
            - echo "main pipeline" > .workflow-editor/.semaphore/semaphore.yml
            - echo "release" > .workflow-editor/.semaphore/release.yml
            - artifact push job .workflow-editor/.semaphore/semaphore.yml -d .workflow-editor/.semaphore
            - artifact push job .workflow-editor/.semaphore/release.yml -d .workflow-editor/.semaphore
