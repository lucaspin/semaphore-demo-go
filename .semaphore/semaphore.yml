version: v1.0
name: Semaphore Go CI example
agent:
  machine:
    type: f1-standard-2
    os_image: ubuntu2204
blocks:
  - name: Build project
    task:
      jobs:
        - name: Test
          commands:
            - mkdir -p .workflow-editor/.semaphore
            - echo "main pipeline" > .workflow-editor/.semaphore/semaphore.yml
            - echo "integration" > .workflow-editor/.semaphore/integration.yml
            - mkdir -p .workflow-editor/.semaphore/release
            - echo "release" > .workflow-editor/.semaphore/release/release.yml
            - artifact push job .workflow-editor/.semaphore -d .workflow-editor/.semaphore
